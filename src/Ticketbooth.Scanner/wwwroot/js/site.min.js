function beginScan(n){function r(t){console.log(t);n.invokeMethodAsync("Validate",t).then(n=>{n&&(i(),window.removeEventListener("popstate",i))})}function i(){scanning=!1;t.removeListener("scan",r);t.stop()}scanning&&i();let t=new Instascan.Scanner({video:document.getElementById("preview"),mirror:!1});window.addEventListener("popstate",i);Instascan.Camera.getCameras().then(function(i){i.length>0?(t.start(i[0]),t.addListener("scan",r),n.invokeMethodAsync("NotifyScanStarted"),scanning=!0):(n.invokeMethodAsync("NotifyCameraNotFound"),console.error("No cameras found."))}).catch(function(t){n.invokeMethodAsync("NotifyCameraError");console.error(t)})}let scanning=!1;